<!doctype html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Stock In - Recents</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>

<body>
    <nav class="nav">
        <a href="/research.html">Research</a> |
        <a href="/recents.html">Recents</a> |
        <a href="/favourites.html">Favourites</a>

    </nav>
    <main class="container">
        <h1>Recents</h1>
        <div id="recentsList">Loading...</div>
    </main>
    <script>
        async function loadRecents() {
            const res = await fetch('/api/recents');
            const j = await res.json();
            const root = document.getElementById('recentsList');
            root.innerHTML = '';
            if (!j.recents || j.recents.length === 0) {
                root.innerText = 'No recent searches yet.';
                return;
            }
            j.recents.forEach(r => {
                const div = document.createElement('div');
                div.className = 'recent';
                div.innerHTML = `<strong>${r.company}</strong> â€” <em>${r.tab}</em><div class="prompt">Q: ${r.prompt}</div><details><summary>Answer</summary><div class="response">${r.response}</div><div class="meta">At: ${r.created_at}</div></details>`;
                root.appendChild(div);
            });
        }
        loadRecents();
    </script>
</body>

</html>